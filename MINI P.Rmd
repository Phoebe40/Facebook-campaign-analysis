---
title: "XYZ MARKETING COMPANY, ANALYSIS OF CLIENT'S FACEBOOK ADS CAMPAIGN"
author: "Phoebe Ugoh"
date: "10/7/2022"
output:
  html_document: default
  word_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Reading in the dataset
```{r}
Mcorp <- read.csv('C:\\Users\\FIBI FX\\Desktop\\Data Lab Materials\\Mini project R & BI\\facebook_ads_data.csv') 
# M corporation (Mcorp) = XYZ Marketing Company
```

```{r}
# Viewing the dataset
View(Mcorp)
```

```{r}
# Viewing the top and bottom 6 rows of the dataset
head(Mcorp)
tail(Mcorp)
```

```{r}
# Checking the unique values of variables in the dataset
unique(Mcorp$Client_companies)
```


```{r}
unique(Mcorp$interest)
```


```{r}
unique(Mcorp$age)
```


```{r}
unique(Mcorp$gender)
```


```{r}
unique(Mcorp$Total_Conversion)
```


```{r}
unique(Mcorp$Approved_Conversion)
```

```{r}
# Renaming the second column
colnames(Mcorp)[2] = "Client_companies"
```

```{r}
# Renaming the unique values of the second column (Client_companies)
Mcorp$Client_companies[Mcorp$Client_companies == 916] <- "Redcorp"
Mcorp$Client_companies[Mcorp$Client_companies == 936] <- "Greencorp"
Mcorp$Client_companies[Mcorp$Client_companies == 1178] <- "Whitecorp"
View(Mcorp)
```

```{r}
# Checking the structure of Mcorp to ensure all variables are in their proper datatypes
str(Mcorp)
```
 There are no errors in datatypes

```{r}
# Checking for missing values
summary(is.na(Mcorp))
table(is.na(Mcorp))
```
 There are no missing values

```{r}
# Viewing names of all variables in the dataset
colnames(Mcorp)
```

```{r}
# Loading required libraries
library(dplyr)
library(ggplot2)
library(corrplot)
```

## Finding correlation between the Dependent and Independent variables
```{r}
#Correlation coefficient between the target variable and independent variables
cor(Mcorp$"Approved_Conversion", Mcorp$"Impressions")
cor(Mcorp$"Approved_Conversion", Mcorp$"Clicks")
cor(Mcorp$"Approved_Conversion", Mcorp$"Spent")
cor(Mcorp$"Approved_Conversion", Mcorp$"Total_Conversion")
```

* The correlation coefficient of  **0.68** for Impressions indicates a strong correlation being close to 1.
* The correlation coefficient of  **0.55** for Clicks indicates a Moderate correlation.
* The correlation coefficient of  **0.59** for spent indicates a Moderate correlation as well.
* The correlation coefficient of  **0.86** for Total_Conversion indicates a very strong correlation being really close to 1.

```{r}
# Creating a new dataset containing the dependent and independent variables only
new_mcorp <- subset(Mcorp, select = -c(age,gender,interest,Client_companies,ad_id,fb_campaign_id))
```

# Visualization
 Level of correlation among the dependent and independent variables

```{r}
# By number
 cor_new_mcorp <- cor(new_mcorp)
 corrplot(cor_new_mcorp, method = 'number', order = 'alphabet')
```


From the heatmap above, we again see levels of correlation between the dependent variable and the independent variables. Also, we observe that some independent variables are closely correlated with one another. For example, clicks and impression, clicks and spent and impression and spent are seen to be highly correlated.

```{r}
# Correlation by color
corrplot(cor_new_mcorp, method = 'color')
```

## To determine the best performing campaign based on Conversions

```{r}
Mcorp_df <- Mcorp %>%
  group_by(Client_companies) %>%
  summarize(SpentSum=sum(Spent), 
            Apprperf_spent=sum(Approved_Conversion)/(sum(Spent)),
            Totalperf_spent=sum(Total_Conversion)/(sum(Spent)),
            Appr.conv=sum(Approved_Conversion), 
            Total.conv=sum(Total_Conversion),
            SpentAvg=mean(Spent), 
            Camp_perf_apprconv=sum(Approved_Conversion)/(AdsCount=n()), 
            Camp_perf_totalconv=(sum(Total_Conversion)/(AdsCount=n())),
            AdsCount=n())
Mcorp_df
```


```{r}
# To calculate for Customer Acquisition Cost (CAC), and performance rate of each campaign, total and approved conversions generated by free ads are excluded.
## SumSpent/Approved conversion = CAC
## Approved conversion / SumSpent = Campaign Performance rate (by Approved conversion)
## Total conversion / SumSpent = Campaign Performance rate (by Total conversion)

Mcorp_df_paid <- Mcorp %>%
  group_by(Client_companies) %>%
  filter(Spent!=0) %>%
  summarize(SpentSum=sum(Spent), 
            Apprperf_spent=sum(Approved_Conversion)/(sum(Spent)), # By Spent and approved conversion
            Totalperf_spent=sum(Total_Conversion)/(sum(Spent)), # By Spent and approved conversion
            Appr.conv=sum(Approved_Conversion), 
            Total.conv=sum(Total_Conversion),
            SpentAvg=mean(Spent), 
            Camp_perf_apprconv=sum(Approved_Conversion)/(AdsCount=n()), # By ads count and approved conversion
            Camp_perf_totalconv=(sum(Total_Conversion)/(AdsCount=n())), # By ads count and total conversion
            CAC=sum(Spent)/(sum(Approved_Conversion)),
            AdsCount=n())
Mcorp_df_paid
```


```{r}
# Performance of each company based on approved conversions and amount spent on ads
ggplot(Mcorp_df_paid, aes(x=as.factor(Client_companies), y=Apprperf_spent)) +
  geom_col(fill="slateblue") +
  xlab("Client_companies") +
  ylab("Apprperf_spent") +
ggtitle("  Client_companies vs Performance_by_Approvedconv")
```


Based on the chart above, it is evident that despite the huge amount spent on the ads of white corporation, it had the poorest performance in terms of approved conversions while Red corporation with a lot less expended ad cost, is the best performing of all.

```{r}
# Performance of each company based on total conversions and amount spent on ads
ggplot(Mcorp_df_paid, aes(x=as.factor(Client_companies), y=Totalperf_spent)) +
  geom_col(fill="slateblue") +
  xlab("Client_companies") +
  ylab("Totalperf_spentt") +
ggtitle(" Client_companies vs performance_by_Total Conversion")

```

Similar to the previous chart, White corporation performed the least in terms of total conversions considering the huge sum spent on its ad campaign.

```{r}
# Performance of each company based on Customer Acquisition Cost

ggplot(Mcorp_df_paid, aes(x=as.factor(Client_companies), y=CAC)) +
  geom_col(fill="slateblue") +
  xlab("Client_companies") +
  ylab("CAC") +
ggtitle("  Client_companies vs CAC")
```

Chart showing the customer acquisition cost of each company.

```{r}
# Whitecorp spent $55662.15 and got 869 approved conversions, how much will Redcorp and Greencorp likely require to generate thesame approved conversions as whitecorp.
Probability_Redcorp <- 9.3568 * 869
Probability_Redcorp

Probability_Greencorp <- 24.52 * 869
Probability_Greencorp
```
This means it will cost Redcorp campaign only $8131 to generate thesame approved conversions as Whitecorp campaign
and for Greencorp, $21307.88 to get same outcome.

## Analyzing relationships between variables

```{r}
ggplot(Mcorp, aes(x=as.factor(Client_companies), y=Spent)) +
  geom_col(fill="slateblue") +
  xlab("Client_companies") +
  ylab("Spent") + 
  ggtitle(" Client_companies vs Spent")
```

The chart above shows that M corporation spent more money on White corporation campaign than on the other two. This could be because more adverts were ran for White corporation than Red and Green combined.


```{r}
ggplot(Mcorp, aes(x=as.factor(Client_companies), y=Impressions)) +
  geom_col(fill="slateblue") +
  xlab("Client_companies") +
  ylab("Impressions") +
  theme(axis.text.y = element_text(angle=45)) +
  ggtitle("M Corporation: Client_companies vs Impressions")
```


The above chart shows that ads ran for white corporation had more impressions than the other 2 companies, meaning that it was seen by more number of persons.

```{r}
ggplot(Mcorp, aes(x=as.factor(Client_companies), y=Clicks)) +
  geom_col(fill="slateblue") +
  xlab("Client_companies") +
  ylab("Clicks") + 
  ggtitle(" M Corporation: Client_companies vs Clicks")
```


Again, adverts for white corp had more clicks, this could greatly be because it had more impressions. Green corporation followed and then red corp having the least clicks.

```{r}
ggplot(Mcorp, aes(x=as.factor(Client_companies), y=Total_Conversion)) +
  geom_col(fill="slateblue") +
  xlab("Client_companies") +
  ylab("Total_Conversion") + 
  ggtitle(" Client_companies vs Total_Conversion")
```


This chart shows the outcome of campaigns in terms of Total conversions.

```{r}
ggplot(Mcorp, aes(x=as.factor(Client_companies), y=Approved_Conversion)) +
  geom_col(fill="slateblue") +
  xlab("Client_companies") +
  ylab("Approved_Conversion") + 
  ggtitle(" Client_companies vs Approved_Conversions")
```


Chart showing approved conversions of ads ran for each client company


```{r}
ggplot(Mcorp, aes(x=as.factor(age), y=Clicks, fill=Client_companies)) +
  geom_col(position = "dodge", stat = "identity") +
  xlab("Age") +
  ylab("Clicks") +
ggtitle(" M corporation: Age vs Clicks")
```


Chart showing the age categories in proportion to Clicks for each campaign

```{r}
ggplot(Mcorp, aes(fill=age, x=Client_companies)) + 
  geom_bar(position="fill") + 
  ggtitle(" Age vs Client_companies")
```


Chart showing the age group that viewed the ads of each company

```{r}
ggplot(Mcorp, aes(fill=gender, x=Client_companies)) + 
  geom_bar(position="dodge") + 
  ggtitle(" Gender vs Client_companies")
```


Chart showing the gender of people who viewed the ads of each company

```{r}
ggplot(Mcorp, aes(x=as.factor(gender), y=Total_Conversion, fill=Client_companies)) +
  geom_col(position = "dodge", stat = "identity") +
  xlab("Gender") +
  ylab("Total_Conversion") +
ggtitle(" M corporation: Gender vs Total_Conversion")
```


Chart showing the proportion of gender to total conversion for each campaign

```{r}
ggplot(Mcorp, aes(x=as.factor(age), y=Total_Conversion, fill=Client_companies)) +
  geom_col(position = "dodge", stat = "identity") +
  xlab("Age") +
  ylab("Total_Conversion") +
ggtitle(" M corporation: Age vs Total_Conversion")
```


Chart showing the proportion of age to total conversion for each campaign


## ***SUMMARY OF OBSERVATIONS***
#### All analysis were made with the inclusion of outliers because they were considered relevant to answering core business questions and making recommendations.

### ***COMPANY 916 (Red Corporation)***

#### 1. Had very few adverts ran for them, 54 to be exact.
#### 2. XYZ marketing company spent the least amount ($149.71) on adverts for 916.
#### 3. As a result of 1 & 2 above, this campaign had the least impressions, clicks, total conversions and approved conversions.
#### 4. From the analysis ran on the data, 916 Campaign happened to be the best performing of the three campaigns. This campaign is considered the most effective and efficient because it cost a lot less to acquire a customer, ($9.35), and its performance rate calculated is highest.
#### 5. 8 approved conversions were generated by free ads.

### ***COMPANY 936 (Green Corporation)***
#### 1. The campaign for this company had 464 adverts.
#### 2. The marketing company spent $2893.37 on adverts.
#### 3. The overall performance of the campaign for this company is not as good as 916 but it is better than 1178.
#### 4. This campaign expended 24.52 to acquire a customer
#### 5. 65 approved conversions were generated by free ads.

### ***COMPANY 1178 (White Corporation)***
#### 1. The campaign for this company had 625 adverts.
#### 2. The marketing company spent $55,662.15 on adverts.
#### 3. This company's campaign has the poorest overall performance even though it had the most impressions, clicks, total and approved impressions. The reason for this is that it spent $64.05 to acquire one customer and its performance rate calculated is the lowest.
#### 4. 3 approved conversions were generated by free ads.

#### * Overall, more ads were shown to males than female.

### ***RECOMMENDATIONS ON IMPROVING CAMPAIGNS FOR EACH COMPANY***

#### * The tactics employed for Red Corporation campaign should be improved upon and replicated on Green and White respectively because it was able to get more purchasing customers with minimal cost.
#### * A more in-depth analysis should be made on the free ads that generated approved conversions to see how to best maximize such opportunities.
#### * The reason why so much was spent on White Corporation campaign should be further investigated because its outcome of total conversions and especially approved conversions was not commensurate with the amount expended on the campaign. This implies that the campaign did not accrue the expected economic benefit to the company.
#### * M corp should consider allotting more funds to Red campaign because if it could get 16 patronizing customers by expending $149.71, there is a high chance that it will get the patronage of 869 customers with $8131 and a lot more with higher funds.





















